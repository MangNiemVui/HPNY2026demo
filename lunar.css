/* lunar.css — reskin cho Tết phương Đông (Năm Ngọ 2026)
   Mục tiêu: chỉ đổi phong cách UI + thêm hoạt náo CSS (không GIF).
*/

:root{
  --ink:#2b1500;
  --muted: rgba(43,21,0,.72);

  --bgDeep:#2b0008;
  --bgRed:#7a0014;
  --bgRed2:#b40018;
  --gold:#ffcc4d;
  --gold2:#ffe7a3;

  --card: rgba(255, 243, 222, .86);
  --card2: rgba(255, 243, 222, .76);
  --stroke: rgba(255, 220, 150, .35);
  --shadow: 0 22px 65px rgba(0,0,0,.35);

  --accent:#b40018;
  --accent2:#ffcc4d;
  --danger:#ff4d6d;
  --radius: 24px;
}

html,body{height:100%}
body{
  background:
    radial-gradient(1200px 800px at 15% 15%, rgba(255, 204, 77, .10), transparent 60%),
    radial-gradient(900px 700px at 80% 20%, rgba(255, 100, 120, .12), transparent 58%),
    radial-gradient(900px 700px at 60% 85%, rgba(255, 230, 163, .12), transparent 60%),
    linear-gradient(135deg, var(--bgDeep), var(--bgRed));
  color: var(--ink);
}

/* Fireworks canvas stays */

.card{
  background: linear-gradient(180deg, var(--card), var(--card2));
  border: 1px solid var(--stroke);
  box-shadow: var(--shadow);
}

.topbar{
  background:
    radial-gradient(420px 180px at 15% 30%, rgba(255,204,77,.35), transparent 60%),
    linear-gradient(90deg, rgba(180,0,24,.65), rgba(255,204,77,.28));
  border-bottom: 1px solid rgba(255, 220, 150, .22);
}

.badge{
  background: rgba(255, 243, 222, .72);
  border: 1px solid rgba(255, 220, 150, .35);
}

.pill{
  background: rgba(255, 243, 222, .62);
  border: 1px solid rgba(255, 220, 150, .30);
}

.btnMusic, button{
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  box-shadow: 0 14px 30px rgba(180,0,24,.22);
}

.btnSecondary{
  background: rgba(255, 243, 222, .72);
  border: 1px solid rgba(180,0,24,.20);
  color: rgba(43,21,0,.88);
}

.wishBox{
  background: rgba(255, 243, 222, .72);
  border: 1px solid rgba(255, 220, 150, .32);
}

.year{
  background: linear-gradient(90deg, var(--accent2), #fff2c7);
  -webkit-background-clip: text;
  background-clip:text;
  color: transparent;
  text-shadow: 0 10px 25px rgba(255, 204, 77, .12);
}

/* ===== Countdown overlay ===== */
.countdownOverlay{
  position: fixed;
  inset: 0;
  z-index: 999999;
  display: grid;
  place-items: center;
  padding: 18px;
  background:
    radial-gradient(900px 700px at 50% 35%, rgba(255,204,77,.22), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,.60), rgba(0,0,0,.20));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.countdownCard{
  width: min(560px, 94vw);
  border-radius: 24px;
  padding: 18px 16px;
  background: rgba(255, 243, 222, .92);
  border: 1px solid rgba(255, 220, 150, .40);
  box-shadow: 0 22px 70px rgba(0,0,0,.35);
  text-align: center;
  position: relative;
  overflow: hidden;
}

.countdownCard::before{
  content:"";
  position:absolute; inset:-60% -40%;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,204,77,.38), transparent 40%),
    radial-gradient(circle at 70% 65%, rgba(180,0,24,.20), transparent 45%);
  filter: blur(16px);
  animation: cdFloat 6s ease-in-out infinite;
}
@keyframes cdFloat{
  0%,100%{ transform: translate(-2%, -1%) rotate(-2deg); }
  50%{ transform: translate(2%, 1%) rotate(2deg); }
}

.cdTitle{ position: relative; z-index:1; font-weight: 950; font-size: 18px; margin: 0 0 8px; }
.cdSub{ position: relative; z-index:1; font-size: 13px; line-height: 1.45; color: rgba(43,21,0,.74); margin: 0 0 14px; }

.cdGrid{
  position: relative; z-index:1;
  display: grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap: 10px;
  margin: 14px 0 14px;
}

.cdUnit{
  border-radius: 18px;
  padding: 12px 10px;
  background: rgba(255,255,255,.68);
  border: 1px solid rgba(180,0,24,.14);
}

.cdNum{ font-size: 28px; font-weight: 950; line-height: 1; color: rgba(180,0,24,.92); }
.cdLab{ margin-top: 6px; font-size: 12px; font-weight: 900; letter-spacing: .2px; opacity: .85; }

.cdActions{ position: relative; z-index:1; display:flex; justify-content:center; gap:10px; flex-wrap:wrap; }

.cdEnter{ border-radius: 999px; padding: 10px 14px; font-weight: 950; }

.cdNote{ position: relative; z-index:1; font-size: 12px; color: rgba(43,21,0,.70); margin-top: 10px; }

/* ===== Lunar flow overlay ===== */
.lunarFlow{
  position:absolute;
  inset:0;
  z-index: 40;
  display:flex;
  align-items:stretch;
  justify-content:center;
  padding: 14px;
}

.lunarFlow.hidden{ display:none; }

.lunarStage{
  width: 100%;
  border-radius: 22px;
  position: relative;
  overflow: hidden;
  background:
    radial-gradient(900px 420px at 50% 0%, rgba(255,204,77,.22), transparent 60%),
    radial-gradient(600px 380px at 15% 60%, rgba(255,110,140,.16), transparent 60%),
    linear-gradient(135deg, rgba(122,0,20,.88), rgba(180,0,24,.82));
  border: 1px solid rgba(255, 220, 150, .28);
  box-shadow: 0 22px 70px rgba(0,0,0,.30);
}

.lunarDecor{ position:absolute; inset:0; pointer-events:none; }

.lantern{ position:absolute; width: 110px; height:auto; transform-origin: 50% 0%; animation: swing 3.6s ease-in-out infinite; opacity: .95; }
.lantern--l1{ left: 14px; top: -10px; animation-delay: .2s; }
.lantern--l2{ right: 14px; top: -14px; width: 98px; animation-delay: .6s; }
@keyframes swing{
  0%,100%{ transform: rotate(-6deg) translateY(0); }
  50%{ transform: rotate(6deg) translateY(2px); }
}

.cloud{ position:absolute; width: 340px; height:auto; opacity: .75; filter: drop-shadow(0 10px 30px rgba(0,0,0,.25)); }
.cloud--c1{ left:-240px; bottom: 18px; animation: drift 16s linear infinite; }
.cloud--c2{ left:-380px; bottom: 86px; width: 280px; opacity: .55; animation: drift 22s linear infinite; }
@keyframes drift{
  from{ transform: translateX(0); }
  to{ transform: translateX(1200px); }
}

.petalLayer{ position:absolute; inset:0; overflow:hidden; }
.petal{
  position:absolute;
  width: 24px;
  height: 24px;
  background: center/contain no-repeat url('./image/petal.svg');
  opacity: .9;
  animation: fall linear infinite;
}
@keyframes fall{
  0%{ transform: translateY(-50px) translateX(0) rotate(0deg); }
  100%{ transform: translateY(105%) translateX(120px) rotate(240deg); }
}

.lunarInner{
  position: relative;
  z-index: 1;
  display:flex;
  flex-direction:column;
  height: 100%;
}

.lunarHead{
  padding: 14px 14px 8px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  flex-wrap:wrap;
}

.lunarTitle{
  font-weight: 950;
  color: #fff;
  letter-spacing: .2px;
  font-size: 18px;
  display:flex;
  align-items:center;
  gap: 10px;
}

.lunarTitle span{
  display:inline-flex;
  align-items:center;
  gap:10px;
}

.lunarUser{ color: rgba(255,255,255,.86); font-weight: 800; font-size: 13px; }

.horseWrap{
  padding: 6px 14px 0;
  display:flex;
  align-items:center;
  justify-content:center;
}

.horse{
  width: min(320px, 70vw);
  height: auto;
  filter: drop-shadow(0 18px 45px rgba(0,0,0,.35));
  animation: horseFloat 3.8s ease-in-out infinite;
}
@keyframes horseFloat{
  0%,100%{ transform: translateY(0) scale(1); }
  50%{ transform: translateY(-10px) scale(1.01); }
}

.flowSteps{ flex: 1 1 auto; padding: 10px 14px 14px; display:grid; place-items:center; }
.flowStep{
  width: min(560px, 100%);
  border-radius: 18px;
  padding: 14px;
  background: rgba(255,243,222,.92);
  border: 1px solid rgba(255, 220, 150, .34);
  box-shadow: 0 18px 55px rgba(0,0,0,.18);
}
.flowStep h2{ margin: 0 0 10px; font-size: 16px; font-weight: 950; color: rgba(43,21,0,.92); }
.flowStep p{ margin: 6px 0 10px; color: rgba(43,21,0,.72); font-size: 13px; line-height: 1.45; }

.flowForm{ display:flex; flex-direction:column; gap:10px; }
.flowForm input{
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(180,0,24,.22);
  background: rgba(255,255,255,.75);
  color: rgba(43,21,0,.92);
}

.flowHint{ font-size: 12px; color: rgba(43,21,0,.74); line-height: 1.45; }

.resultBox{
  margin-top: 10px;
  border-radius: 16px;
  padding: 12px;
  border: 1px solid rgba(180,0,24,.18);
  background: rgba(255,255,255,.72);
  white-space: pre-wrap;
  line-height: 1.45;
}

.wheelWrap{ display:grid; place-items:center; margin: 10px 0 12px; position:relative; }
.wheel{
  width: 270px;
  height: 270px;
  border-radius: 999px;
  border: 10px solid rgba(255, 204, 77, .85);
  box-shadow: 0 16px 45px rgba(0,0,0,.25);
  background: conic-gradient(
    rgba(255,204,77,.95) 0 180deg,
    rgba(180,0,24,.92) 180deg 360deg
  );
  position: relative;
  transition: transform 3.2s cubic-bezier(.12,.85,.13,1);
}

.wheel::after{
  content:"";
  position:absolute; inset:0;
  border-radius:999px;
  background: radial-gradient(circle at 35% 35%, rgba(255,255,255,.35), transparent 45%);
}

.wheelLabel{
  position:absolute;
  left: 50%;
  top: 50%;
  width: 120px;
  transform-origin: 0% 0%;
  font-weight: 950;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: .5px;
  color: rgba(43,21,0,.90);
}

.wheelLabel--bracelet{ transform: translate(-50%, -50%) rotate(-55deg) translate(60px, -20px); }
.wheelLabel--ring{ color: rgba(255,255,255,.92); transform: translate(-50%, -50%) rotate(125deg) translate(60px, -20px); }

.wheelPin{
  position:absolute;
  top: -6px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 14px solid transparent;
  border-right: 14px solid transparent;
  border-bottom: 26px solid rgba(255, 204, 77, .95);
  filter: drop-shadow(0 10px 20px rgba(0,0,0,.25));
}

.fortuneJar{
  width: 220px;
  height: 120px;
  margin: 8px auto 10px;
  border-radius: 18px;
  border: 1px solid rgba(180,0,24,.18);
  background:
    radial-gradient(180px 120px at 35% 30%, rgba(255,204,77,.22), transparent 55%),
    linear-gradient(135deg, rgba(255,255,255,.78), rgba(255,255,255,.58));
  display:grid; place-items:center;
  font-weight: 950;
  color: rgba(180,0,24,.92);
}

.fortuneJar.shake{ animation: jarShake .62s ease-in-out 1; }
@keyframes jarShake{
  0%,100%{ transform: rotate(0deg); }
  15%{ transform: rotate(-6deg); }
  30%{ transform: rotate(6deg); }
  45%{ transform: rotate(-5deg); }
  60%{ transform: rotate(5deg); }
  75%{ transform: rotate(-3deg); }
}

.flowNav{ display:flex; justify-content:center; gap:8px; padding: 0 14px 14px; }
.dot{ width: 10px; height: 10px; border-radius: 99px; background: rgba(255,255,255,.35); border: 1px solid rgba(255,204,77,.30); }
.dot.on{ background: rgba(255,204,77,.90); }

.flowBtns{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; justify-content:center; }

/* Responsive */
@media (max-width: 520px){
  .cdGrid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  .horse{ width: min(280px, 78vw); }
  .wheel{ width: 240px; height: 240px; }
}
